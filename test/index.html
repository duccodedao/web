<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TON Connect Message Sender</title>
  <script src="https://cdn.jsdelivr.net/npm/@tonconnect/sdk@1.0.0/dist/tonconnect.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1>TON Connect Message Sender</h1>
  
  <button id="connectButton">Connect to Wallet</button>
  <button id="sendMessageButton" style="display:none;">Send Message</button>
  
  <script>
    const connectButton = document.getElementById('connectButton');
    const sendMessageButton = document.getElementById('sendMessageButton');

    let tonConnect;

    // Initialize TON Connect
    tonConnect = new TonConnect({
      // Your application settings
      manifest: {
        name: 'TON Connect Example App',
        url: window.location.origin,
      },
      // Enable debug logs (optional)
      debug: true,
    });

    // Event listener to handle wallet connection
    connectButton.addEventListener('click', async () => {
      try {
        const wallet = await tonConnect.connect();
        console.log('Connected to wallet:', wallet);

        // After wallet is connected, show the send message button
        sendMessageButton.style.display = 'block';
      } catch (error) {
        console.error('Failed to connect to wallet:', error);
      }
    });

    // Event listener to handle sending a message
    sendMessageButton.addEventListener('click', async () => {
      try {
        const message = {
          text: 'Hello, TON world!',
          recipients: ['ton_address_here'], // Replace with actual recipient's TON address
        };

        const result = await tonConnect.sendMessage(message);
        console.log('Message sent:', result);
      } catch (error) {
        console.error('Failed to send message:', error);
      }
    });
  </script>

</body>
</html>
