<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini App Telegram</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
    <script async type="module" src="https://cdn.jsdelivr.net/gh/duccodedao/aa@main/js.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background: #f5f5f5; text-align: center; padding-bottom: 90px; transition: background 0.3s, color 0.3s; }
        .dark-mode { background: #222; color: #fff; }

        /* Container ch√≠nh */
        .container { max-width: 400px; margin: 20px auto; padding: 15px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); transition: background 0.3s; }
        .dark-mode .container { background: #333; }

        /* H·ªì s∆° ng∆∞·ªùi d√πng */
        .profile { display: flex; align-items: center; justify-content: space-between; padding: 10px; }
        .profile-left { display: flex; align-items: center; }
        .profile img { width: 60px; height: 60px; border-radius: 50%; border: 3px solid #007bff; }
        .profile-info { margin-left: 15px; text-align: left; }
        .profile-info h2 { font-size: 18px; color: #333; margin-bottom: 3px; }
        .profile-info p { font-size: 14px; color: #666; }
        .dark-mode .profile-info h2 { color: #fff; }
        .dark-mode .profile-info p { color: #ccc; }

        /* N√∫t chuy·ªÉn ƒë·ªïi s√°ng/t·ªëi */
        .toggle-mode { cursor: pointer; font-size: 24px; padding: 10px; transition: color 0.3s; }
        .dark-mode .toggle-mode { color: yellow; }

        /* MyTonSwap Widget */
        #swap-widget { 
            width: 90%; max-width: 600px; padding: 25px; 
            background: #2c3e50; border-radius: 10px; 
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); 
            border: 2px solid #8e44ad; color: white; 
            margin: 20px auto;
        }

        /* Footer Menu */
        .footer { position: fixed; bottom: 0; width: 100%; background: #fff; display: flex; justify-content: space-around; padding: 12px 0; box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1); border-top: 2px solid #ddd; transition: background 0.3s; }
        .dark-mode .footer { background: #333; border-top: 2px solid #555; }
        .footer a { text-decoration: none; color: gray; font-size: 14px; display: flex; flex-direction: column; align-items: center; flex: 1; padding: 10px; transition: color 0.3s; }
        .footer a i { font-size: 22px; margin-bottom: 5px; }
        .footer a.active { color: #007bff; }
        .dark-mode .footer a { color: #bbb; }
        .dark-mode .footer a.active { color: yellow; }
    </style>
</head>

<body>

    <div class="container">
        <!-- H·ªì s∆° c√° nh√¢n -->
        <div class="profile">
            <div class="profile-left">
                <img src="default-avatar.png" id="avatar">
                <div class="profile-info">
                    <h2 id="name">T√™n Ng∆∞·ªùi D√πng</h2>
                    <p id="username">@username</p>
                </div>
            </div>
            <div class="toggle-mode" onclick="toggleDarkMode()">
                <i class="fas fa-moon">üåö</i>
            </div>
        </div>
    </div>

    <!-- MyTonSwap Widget -->
    <div id="swap-widget"></div>

    <!-- Footer Menu -->
    <div class="footer">
        <a href="#" id="home" class="active" onclick="setActive(this)"><i class="fas fa-home"></i> Home</a>
        <a href="#" id="wallet" onclick="setActive(this)"><i class="fas fa-wallet"></i> Wallet</a>
        <a href="#" id="profile" onclick="setActive(this)"><i class="fas fa-user"></i> Profile</a>
    </div>

    <script type="module">
        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://bmasshd.click/tonconnect-manifest.json',
        });
        createSwap("swap-widget", { tonConnectInstance: tonConnectUI });
    </script>

    <script>
        let tg = window.Telegram.WebApp;

        function loadUserData() {
            tg.ready();
            let user = tg.initDataUnsafe.user;
            if (user) {
                document.getElementById("name").innerText = user.first_name + (user.last_name ? " " + user.last_name : "");
                document.getElementById("username").innerText = user.username ? "@" + user.username : "Kh√¥ng c√≥ username";
                document.getElementById("avatar").src = user.photo_url ? user.photo_url : "default-avatar.png";
            }
        }

        function setActive(element) {
            document.querySelectorAll('.footer a').forEach(link => link.classList.remove('active'));
            element.classList.add('active');
        }

        function toggleDarkMode() {
            document.body.classList.toggle("dark-mode");
        }

        window.onload = loadUserData;
    </script>

</body>

</html>
